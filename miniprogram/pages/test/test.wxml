<view class="container">
  <!-- 顶部进度条 -->
  <view class="progress-section">
    <view class="progress-bar">
      <view class="progress-fill" style="width: {{progress}}%"></view>
    </view>
    <text class="progress-text">{{currentQuestionIndex + 1}} / {{questions.length}}</text>
  </view>

  <!-- 题目内容 -->
  <view class="question-section">
    <view class="loading" wx:if="{{loading}}">
      <text>加载题目中...</text>
    </view>

    <view class="error" wx:if="{{error}}">
      <text>{{error}}</text>
      <button class="retry-btn" bindtap="loadQuestions">重试</button>
    </view>

    <view class="question-content" wx:if="{{!loading && !error && currentQuestion}}">
      <text class="question-title">{{currentQuestion.question}}</text>
      
      <view class="options-list">
        <view 
          class="option-item {{selectedAnswer === item.id ? 'selected' : ''}} {{showResult ? (selectedAnswer === item.id ? 'correct' : '') : ''}}"
          wx:for="{{currentQuestion.options}}" 
          wx:key="id"
          bindtap="selectOption"
          data-option-id="{{item.id}}"
        >
          <view class="option-indicator">
            <view class="option-radio" wx:if="{{selectedAnswer !== item.id}}"></view>
            <view class="option-radio-checked" wx:if="{{selectedAnswer === item.id}}"></view>
          </view>
          <text class="option-text">{{item.text}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- 底部按钮 -->
  <view class="bottom-section">
    <button 
      class="nav-btn prev-btn {{currentQuestionIndex === 0 ? 'disabled' : ''}}" 
      bindtap="prevQuestion"
      disabled="{{currentQuestionIndex === 0}}"
    >
      上一题
    </button>
    
    <button 
      class="nav-btn next-btn {{selectedAnswer ? '' : 'disabled'}}" 
      bindtap="nextQuestion"
      disabled="{{!selectedAnswer}}"
    >
      {{isLastQuestion ? '完成测试' : '下一题'}}
    </button>
  </view>

  <!-- 完成确认弹窗 -->
  <view class="modal-overlay" wx:if="{{showConfirm}}" bindtap="hideConfirm">
    <view class="confirm-modal" catchtap="">
      <view class="modal-header">
        <text class="modal-title">确认提交</text>
      </view>
      <view class="modal-content">
        <text class="modal-text">您已完成所有题目，确认提交测试吗？</text>
      </view>
      <view class="modal-actions">
        <button class="modal-btn cancel" bindtap="hideConfirm">取消</button>
        <button class="modal-btn confirm" bindtap="submitTest">确认</button>
      </view>
    </view>
  </view>
</view>