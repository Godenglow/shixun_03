# 心理测试小程序

一个基于微信云开发的心理测试小程序，帮助用户通过专业的心理测试了解自己。

## 功能特性

### 🔐 用户系统
- 微信授权登录
- 用户信息管理
- 云数据库存储

### 📋 测试功能
- 多种心理测试类型
- 单选题答题界面
- 实时进度显示
- 智能结果分析

### 📊 结果系统
- 专业测试报告
- 个性化建议
- 结果分享功能
- 历史记录管理

### ☁️ 云端服务
- 云函数处理逻辑
- 云数据库存储
- 云存储图片管理
- 实时数据同步

## 技术架构

### 前端
- 微信小程序原生开发
- 响应式设计
- 组件化开发
- 云开发集成

### 后端
- 微信云函数
- 云数据库 (MongoDB)
- 云存储
- 用户认证

### 数据库设计

#### 集合结构

**users** - 用户信息
```javascript
{
  _openid: "用户唯一标识",
  nickName: "用户昵称",
  avatarUrl: "头像URL",
  createTime: "创建时间",
  lastLoginTime: "最后登录时间"
}
```

**tests** - 测试信息
```javascript
{
  _id: "测试ID",
  title: "测试标题",
  description: "测试描述",
  type: "测试类型",
  coverImage: "封面图片",
  questionCount: "题目数量",
  maxScore: "最大分数",
  status: "状态"
}
```

**questions** - 题目数据
```javascript
{
  _id: "题目ID",
  testId: "所属测试ID",
  order: "题目顺序",
  question: "题目内容",
  options: [
    {
      id: "选项ID",
      text: "选项内容",
      score: "选项得分"
    }
  ]
}
```

**records** - 测试记录
```javascript
{
  _openid: "用户ID",
  testId: "测试ID",
  testTitle: "测试标题",
  answers: "用户答案",
  totalScore: "总分",
  result: "测试结果",
  createTime: "创建时间"
}
```

## 项目结构

```
├── cloudfunctions/          # 云函数
│   ├── login/              # 登录云函数
│   ├── generateReport/     # 生成报告云函数
│   └── uploadImage/        # 图片上传云函数
├── pages/                  # 小程序页面
│   ├── index/             # 首页
│   ├── login/             # 登录页
│   ├── test/              # 答题页
│   ├── result/            # 结果页
│   └── profile/           # 个人中心
├── images/                # 小程序图片
├── app.js                 # 小程序入口
├── app.json               # 小程序配置
├── app.wxss               # 全局样式
└── project.config.json    # 项目配置
```

## 部署说明

### 1. 环境准备
- 注册微信小程序账号
- 开通云开发服务
- 获取云环境ID

### 2. 项目配置
1. 将 `project.config.json` 中的 `appid` 替换为你的小程序AppID
2. 在 `app.js` 中将 `env` 替换为你的云环境ID
3. 在微信开发者工具中打开项目

### 3. 云开发配置
1. 在微信开发者工具中点击"云开发"
2. 创建云环境
3. 在云开发控制台中初始化数据库
4. 上传并部署云函数

### 4. 数据库初始化
在云开发控制台的数据库页面中，参考 `database-init.js` 脚本创建集合并添加示例数据。

### 5. 云存储配置
1. 在云开发控制台中创建存储桶
2. 上传默认图片到存储桶
3. 获取图片的cloud://路径

## 使用说明

### 用户端功能

1. **登录**
   - 点击微信授权登录
   - 首次登录自动创建用户档案

2. **测试**
   - 在首页选择测试类型
   - 依次完成所有题目
   - 确认提交生成报告

3. **查看结果**
   - 立即查看测试结果
   - 获得个性化建议
   - 支持结果分享

4. **个人中心**
   - 查看所有测试记录
   - 管理个人信息
   - 历史结果回溯

### 测试类型

目前支持的测试类型：
- **性格测试**：了解性格倾向（内向/外向）
- **焦虑测试**：评估焦虑水平
- **压力测试**：检测压力状态
- **情绪测试**：分析情绪状态

## 开发指南

### 添加新测试
1. 在 `tests` 集合中添加测试信息
2. 在 `questions` 集合中添加对应题目
3. 更新 `generateReport` 云函数中的报告生成逻辑

### 自定义样式
- 修改 `app.wxss` 调整全局样式
- 各页面样式文件在对应的 `.wxss` 文件中

### 云函数开发
- 云函数代码在 `cloudfunctions` 目录下
- 修改后需要重新上传并部署

## 注意事项

1. **云环境配置**
   - 确保云环境ID正确配置
   - 定期检查云资源使用情况

2. **数据安全**
   - 用户数据加密存储
   - 遵循微信小程序隐私政策

3. **性能优化**
   - 合理设置数据库索引
   - 图片压缩和缓存
   - 分页加载大数据

4. **用户体验**
   - 网络异常处理
   - 加载状态显示
   - 操作反馈提示

## 更新日志

### v1.0.0 (2024-12-30)
- ✅ 基础功能开发完成
- ✅ 用户登录系统
- ✅ 多种心理测试
- ✅ 结果分析和分享
- ✅ 云存储集成

## 联系方式

如有问题或建议，请通过以下方式联系：
- 项目issue提交
- 开发者邮箱：developer@example.com

---

**注意**：本项目仅供学习和研究使用，心理测试结果仅供参考，不能替代专业心理咨询。如有心理问题，请咨询专业心理健康专家。